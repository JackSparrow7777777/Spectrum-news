<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Spectrum News — Clean</title>

  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet"/>

  <style>
    /* ====== CLEAN WHITE THEME ====== */
    :root {
      --primary-color: #3478F6;
      --secondary-color: #FF5733;

      /* LEFT/RIGHT palette (US/KR) */
      --left-color: #2E4172;
      --center-left-color: #87CEEB;
      --center-color: #7F8C8D;
      --center-right-color: #F39C12;
      --right-color: #E74C3C;

      --neutral-color: #27AE60;
      --light-gray: #f5f5f5;
      --medium-gray: #e0e0e0;
      --dark-gray: #333333;
      --text-color: #333333;
      --border-radius: 8px;
      --box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'Roboto', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      line-height: 1.6;
      color: var(--text-color);
      background-color: #f9f9f9;
    }

    .container { max-width: 1200px; margin: 0 auto; padding: 0 15px; }

    a { text-decoration: none; color: inherit; }
    ul { list-style: none; }
    button { cursor: pointer; border: none; background: none; font-family: inherit; }

    /* Header */
    header {
      background-color: #fff;
      box-shadow: var(--box-shadow);
      padding: 14px 0;
      position: sticky; top: 0; z-index: 100;
    }
    header .container { display: flex; gap: 16px; justify-content: space-between; align-items: center; }

    .logo h1 { font-size: 22px; font-weight: 700; color: var(--primary-color); letter-spacing: 0.2px; }
    .logo span { color: #E74C3C; font-weight: 500; }

    .search-bar { flex: 1; }
    .search-form { display: flex; gap: 10px; }
    .search-bar input {
      width: 100%; padding: 10px 14px; border: 1px solid var(--medium-gray);
      border-radius: 20px; font-size: 14px; background: #fff;
    }
    .search-btn { background: var(--primary-color); color: #fff; padding: 10px 16px; border-radius: 20px; font-weight: 500; }

    /* Main */
    main { padding: 18px 0; }
    main .container { display: flex; gap: 20px; }

    /* Sidebar */
    .sidebar {
      width: 260px; background: #fff; border-radius: var(--border-radius);
      box-shadow: var(--box-shadow); padding: 18px; position: sticky; top: 78px; height: fit-content;
    }

    .filter-section { margin-bottom: 22px; }
    .filter-section h2 { font-size: 18px; margin-bottom: 12px; color: var(--dark-gray); }
    .filter-section h3 { font-size: 14px; margin: 12px 0 8px; color: var(--dark-gray); }

    .select {
      width: 100%; padding: 10px 12px; border: 1px solid var(--medium-gray);
      border-radius: var(--border-radius); background: #fff; font-size: 14px;
    }

    .toggle-row { display: flex; align-items: center; gap: 10px; font-size: 14px; margin-top: 8px; }
    .toggle-row input { transform: translateY(1px); }

    /* Bias chips */
    .bias-filter { display: flex; justify-content: space-between; align-items: center; gap: 8px; }
    .bias-option { display: flex; flex-direction: column; align-items: center; cursor: pointer; }
    .bias-circle { width: 22px; height: 22px; border-radius: 50%; margin-bottom: 6px; transition: transform 0.2s; }
    .bias-option:hover .bias-circle { transform: scale(1.15); }
    .bias-option.active .bias-circle { outline: 2px solid #000; outline-offset: 2px; }
    .left-bias{background: var(--left-color);} .center-left-bias{background: var(--center-left-color);}
    .center-bias{background: var(--center-color);} .center-right-bias{background: var(--center-right-color);}
    .right-bias{background: var(--right-color);}

    /* Reliability slider (Violet → Green → Yellow) */
    .slider {
      width: 100%;
      height: 5px;
      background: linear-gradient(to right, #7e57c2, #27AE60, #ffeb3b);
      outline: none;
      -webkit-appearance: none;
      border-radius: 5px;
    }
    .slider::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 18px; height: 18px;
      background: #fff; border: 2px solid var(--primary-color);
      border-radius: 50%; cursor: pointer;
    }
    .slider-labels { display: flex; justify-content: space-between; margin-top: 6px; font-size: 12px; color: #666; }

    /* Topics */
    .topics-list li {
      padding: 8px 0; cursor: pointer; color: #555; transition: color 0.15s;
      display: flex; align-items: center; justify-content: space-between;
    }
    .topics-list li:hover { color: var(--primary-color); }
    .topics-list li.active { color: var(--primary-color); font-weight: 500; }

    /* Content area */
    .content { flex: 1; min-width: 0; }

    /* Status bar */
    .status-bar {
      display: flex; flex-wrap: wrap; gap: 10px; align-items: center; justify-content: space-between;
      background: #fff; border-radius: var(--border-radius); box-shadow: var(--box-shadow);
      padding: 10px 14px; margin-bottom: 14px; font-size: 13px; color: #666;
    }
    .pill { display: inline-flex; align-items: center; gap: 8px; background: var(--light-gray); border-radius: 999px; padding: 6px 10px; font-weight: 500; }
    .dot { width: 8px; height: 8px; border-radius: 50%; background: #3478F6; animation: pulse 1.8s ease-in-out infinite; }
    @keyframes pulse { 0%{transform:scale(1);opacity:.8} 50%{transform:scale(1.25);opacity:1} 100%{transform:scale(1);opacity:.8} }
    @media (prefers-reduced-motion: reduce) { .dot { animation: none; } }

    .view-options { display: flex; background: #fff; border-radius: var(--border-radius); box-shadow: var(--box-shadow); overflow: hidden; margin-bottom: 16px; }
    .view-option { padding: 10px 16px; font-weight: 500; transition: background-color 0.15s; flex: 0 0 auto; }
    .view-option:hover { background: var(--light-gray); }
    .view-option.active { background: var(--primary-color); color: #fff; }

    /* News grid */
    #news-container { display: grid; grid-template-columns: 1fr; gap: 16px; }
    .cards-2 #news-container { grid-template-columns: repeat(2, 1fr); }
    .cards-3 #news-container { grid-template-columns: repeat(3, 1fr); }

    .article-card {
      background: #fff; border-radius: var(--border-radius); box-shadow: var(--box-shadow);
      overflow: hidden; transition: transform 0.18s ease, box-shadow 0.18s ease;
    }
    .article-card:hover { transform: translateY(-4px); box-shadow: 0 8px 22px rgba(0,0,0,0.08); }

    .article-source { display: flex; align-items: center; gap: 12px; padding: 12px 14px; border-bottom: 1px solid var(--medium-gray); }
    .source-logo { width: 36px; height: 36px; background: var(--light-gray); border-radius: 6px; display: grid; place-items: center; font-weight: 700; color: #666; }
    .source-info { flex: 1; min-width: 0; }
    .source-name { font-weight: 600; font-size: 14px; }
    .source-meta { display: flex; gap: 8px; flex-wrap: wrap; color: #777; font-size: 12px; margin-top: 2px; }

    /* Reliability badge – 3 tiers */
    .reliability-badge { padding: 2px 8px; border-radius: 999px; font-size: 12px; font-weight: 600; }
    .reliability--over    { background: #fff6b3; color: #7a6700; } /* >50 -> Yellow */
    .reliability--default { background: #e6f7e6; color: #1b7f3a; } /* 50  -> Green  */
    .reliability--under   { background: #efe6ff; color: #5b3aa3; } /* <50 -> Violet */

    .bias-badge { background: #f2f3f4; color: #444; padding: 2px 8px; border-radius: 999px; font-size: 12px; font-weight: 600; }
    .bias-badge.left{background:#e7f3fb;color:#2E4172}
    .bias-badge.lean-left{background:#eaf6ff;color:#2E86C1}
    .bias-badge.center{background:#f2f3f4;color:#7F8C8D}
    .bias-badge.lean-right{background:#fef5e7;color:#F39C12}
    .bias-badge.right{background:#fde9e7;color:#E74C3C}
    .bias-badge.unknown{background:#eee;color:#666}

    /* ==== NEW: Uniform media box + per-view fit rules ==== */
    .thumb-frame {
      position: relative;
      width: 100%;
      aspect-ratio: 16 / 9;       /* Prevents layout shift */
      background: #f2f2f2;
      overflow: hidden;
    }
    .thumb-frame img.thumb {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      display: block;
      object-fit: cover;          /* Default (2-up / 3-up): tidy crop */
      object-position: center;    /* tweak to 'center top' if you prefer */
      -webkit-user-select: none;
      user-select: none;
    }
    /* In List view, show full image with subtle letterboxing */
    .cards-1 .thumb-frame img.thumb {
      object-fit: contain;
      background: #0000000a;
    }

    .article-content { padding: 14px; }
    .article-title { font-size: 18px; font-weight: 600; margin-bottom: 8px; color: #222; line-height: 1.35; }
    .article-meta { display: flex; justify-content: space-between; gap: 6px; color: #666; font-size: 13px; margin-bottom: 10px; }
    .article-description { color: #444; font-size: 14px; margin-bottom: 12px; }
    .article-actions { display: flex; justify-content: space-between; align-items: center; }
    .link-btn { color: var(--primary-color); font-weight: 600; padding: 8px 10px; border-radius: 6px; background: #f0f6ff; }

    .loading { text-align: center; padding: 28px; color: #666; }
    .error { background: #fee; color: #b40000; padding: 12px 14px; border-radius: var(--border-radius); border-left: 4px solid #b40000; margin-bottom: 16px; }

    footer { background: var(--dark-gray); color: #fff; padding: 20px 0; margin-top: 28px; }
    footer .container { display: flex; justify-content: space-between; align-items: center; font-size: 13px; opacity: 0.9; }

    /* Responsive */
    @media (max-width: 1024px) { .cards-3 #news-container { grid-template-columns: repeat(2, 1fr); } }
    @media (max-width: 900px) {
      main .container { flex-direction: column; }
      .sidebar { width: 100%; position: static; order: 2; }
      .content { order: 1; }
    }
    @media (max-width: 600px) {
      header .container { flex-direction: column; align-items: stretch; }
      .search-form { width: 100%; }
      .cards-2 #news-container, .cards-3 #news-container { grid-template-columns: 1fr; }
    }
  </style>
</head>

<body class="cards-3">
  <header>
    <div class="container">
      <div class="logo"><h1>Spectrum <span>News</span></h1></div>

      <div class="search-bar">
        <form id="search-form" class="search-form" autocomplete="off">
          <input id="search-input" type="text" placeholder="Search news…" value="latest news" />
          <button class="search-btn" type="submit">Search</button>
        </form>
      </div>
    </div>
  </header>

  <main>
    <div class="container">
      <!-- Sidebar -->
      <aside class="sidebar">
        <section class="filter-section">
          <h2>Filters</h2>

          <h3>Country</h3>
          <select id="country-select" class="select">
            <option value="us">United States</option>
            <option value="gb">United Kingdom</option>
            <option value="ca">Canada</option>
            <option value="au">Australia</option>
            <option value="de">Germany</option>
            <option value="fr">France</option>
            <option value="in">India</option>
            <option value="jp">Japan</option>
            <option value="kr">Korea</option>
          </select>

          <h3>Language</h3>
          <select id="language-select" class="select">
            <option value="en">English</option>
            <option value="es">Spanish</option>
            <option value="fr">French</option>
            <option value="de">German</option>
            <option value="it">Italian</option>
            <option value="pt">Portuguese</option>
            <option value="ko">Korean</option>
            <option value="ja">Japanese</option>
          </select>

          <h3>Articles</h3>
          <select id="max-select" class="select">
            <option value="10">10 articles</option>
            <option value="25">25 articles</option>
            <option value="50">50 articles</option>
            <option value="100">100 articles</option>
          </select>
        </section>

        <!-- Bias + toggles -->
        <section class="filter-section">
          <h2>Bias</h2>
          <div class="bias-filter" id="bias-filter" role="group" aria-label="Bias filter">
            <div class="bias-option active" data-bias="default" aria-pressed="true">
              <div class="bias-circle" style="background:#e0e0e0"></div><small>Default</small>
            </div>
            <div class="bias-option" data-bias="left" aria-pressed="false">
              <div class="bias-circle left-bias"></div><small>Left</small>
            </div>
            <div class="bias-option" data-bias="lean-left" aria-pressed="false">
              <div class="bias-circle center-left-bias"></div><small>CL</small>
            </div>
            <div class="bias-option" data-bias="center" aria-pressed="false">
              <div class="bias-circle center-bias"></div><small>Center</small>
            </div>
            <div class="bias-option" data-bias="lean-right" aria-pressed="false">
              <div class="bias-circle center-right-bias"></div><small>CR</small>
            </div>
            <div class="bias-option" data-bias="right" aria-pressed="false">
              <div class="bias-circle right-bias"></div><small>Right</small>
            </div>
          </div>

          <label class="toggle-row">
            <input type="checkbox" id="balanced-toggle" />
            <span>Balanced view (even mix)</span>
          </label>
        </section>

        <section class="filter-section">
          <h2>Reliability</h2>
          <input id="reliability" class="slider" type="range" min="0" max="100" value="0" />
          <div class="slider-labels"><span>Low</span><span>Medium</span><span>High</span></div>
        </section>

        <section class="filter-section">
          <h2>Time Range</h2>
          <select id="time-range" class="select">
            <option value="any">Any time</option>
            <option value="24h">Past 24 hours</option>
            <option value="7d">Past 7 days</option>
            <option value="30d">Past 30 days</option>
          </select>
        </section>

        <section class="filter-section">
          <h2>Noise Control</h2>
          <label class="toggle-row">
            <input type="checkbox" id="cluster-toggle" checked />
            <span>Cluster similar stories</span>
          </label>
        </section>

        <section class="filter-section">
          <h2>Topics</h2>
          <ul class="topics-list" id="topics">
            <li class="active" data-category="">All</li>
            <li data-category="general">General</li>
            <li data-category="world">World</li>
            <li data-category="business">Business</li>
            <li data-category="technology">Technology</li>
            <li data-category="entertainment">Entertainment</li>
            <li data-category="sports">Sports</li>
            <li data-category="science">Science</li>
            <li data-category="health">Health</li>
          </ul>
        </section>
      </aside>

      <!-- Content -->
      <section class="content">
        <div class="status-bar" id="status-bar">
          <div class="pill"><span class="dot" aria-hidden="true"></span><span id="live-label">Live</span></div>
          <div id="status-text">Loading…</div>
          <div id="cache-text" style="opacity:0.8;"></div>
        </div>

        <div class="view-options" role="tablist" aria-label="View options">
          <button class="view-option" data-view="1" role="tab" aria-selected="false">List</button>
          <button class="view-option active" data-view="2" role="tab" aria-selected="true">2-up</button>
          <button class="view-option" data-view="3" role="tab" aria-selected="false">3-up</button>
        </div>

        <div id="error" class="error" style="display:none;"></div>
        <div id="loading" class="loading" style="display:none;">Loading latest news…</div>

        <div id="news-container" aria-live="polite"></div>
      </section>
    </div>
  </main>

  <footer>
    <div class="container">
      <div>© <span id="year"></span> Spectrum News</div>
      <div>Powered by your Netlify Function + GNews</div>
    </div>
  </footer>

  <script>
    class NewsApp {
      constructor() {
        this.apiEndpoint = '/.netlify/functions/news';
        this.currentCategory = '';
        this.currentBias = 'default';
        this.autoRefreshMs = 30 * 60 * 1000;
        this.viewRoot = document.body;
        this.debouncedLoadNews = this.debounce(() => this.loadNews(), 400);
        this.bindUI();
        this.startAutoRefresh();
        this.loadNews();
      }

      debounce(fn, delay = 400) {
        let t;
        return (...args) => { clearTimeout(t); t = setTimeout(() => fn.apply(this, args), delay); };
      }

      bindUI() {
        document.getElementById('year').textContent = new Date().getFullYear();

        document.getElementById('search-form').addEventListener('submit', (e) => {
          e.preventDefault();
          this.loadNews();
        });

        // Basic selects (debounced)
        ['country-select','language-select','max-select','time-range']
          .forEach(id => document.getElementById(id).addEventListener('change', () => this.debouncedLoadNews()));

        // Reliability slider on change (not every pixel)
        document.getElementById('reliability').addEventListener('change', () => this.debouncedLoadNews());

        // Balanced + Cluster toggles
        document.getElementById('balanced-toggle').addEventListener('change', () => this.debouncedLoadNews());
        document.getElementById('cluster-toggle').addEventListener('change', () => this.debouncedLoadNews());

        // Topics
        document.querySelectorAll('#topics li').forEach(li => {
          li.addEventListener('click', () => {
            document.querySelectorAll('#topics li').forEach(x => x.classList.remove('active'));
            li.classList.add('active');
            this.currentCategory = li.dataset.category || '';
            this.debouncedLoadNews();
          });
        });

        // Bias buttons
        document.querySelectorAll('#bias-filter .bias-option').forEach(opt => {
          opt.addEventListener('click', () => {
            document.querySelectorAll('#bias-filter .bias-option').forEach(x => {
              x.classList.remove('active'); x.setAttribute('aria-pressed','false');
            });
            opt.classList.add('active'); opt.setAttribute('aria-pressed','true');
            this.currentBias = opt.dataset.bias || 'default';
            this.debouncedLoadNews();
          });
        });

        // View options
        const viewBtns = document.querySelectorAll('.view-option');
        viewBtns.forEach(btn => {
          btn.addEventListener('click', () => {
            viewBtns.forEach(x => { x.classList.remove('active'); x.setAttribute('aria-selected','false'); });
            btn.classList.add('active'); btn.setAttribute('aria-selected','true');
            const mode = btn.dataset.view;
            this.viewRoot.classList.remove('cards-1','cards-2','cards-3');
            this.viewRoot.classList.add(`cards-${mode}`);
          });
        });
      }

      startAutoRefresh() { setInterval(() => this.loadNews(), this.autoRefreshMs); }

      async loadNews() {
        const loadingEl = document.getElementById('loading');
        const errorEl = document.getElementById('error');
        const container = document.getElementById('news-container');
        const statusText = document.getElementById('status-text');
        const cacheText = document.getElementById('cache-text');

        loadingEl.style.display = 'block';
        errorEl.style.display = 'none';
        container.innerHTML = '';

        try {
          const q = (document.getElementById('search-input').value || 'latest news').trim();
          const country = document.getElementById('country-select').value;
          const lang = document.getElementById('language-select').value;
          const max = document.getElementById('max-select').value;

          const params = new URLSearchParams({ q, country, lang, max, expand: 'content' });
          if (this.currentCategory) params.set('category', this.currentCategory);
          if (this.currentBias && this.currentBias !== 'default') params.set('bias', this.currentBias);

          // Time range (server will filter; GNews never sees from/to)
          const tr = document.getElementById('time-range').value;
          if (tr !== 'any') {
            let ms = 0;
            if (tr === '24h') ms = 24*60*60*1000;
            if (tr === '7d')  ms = 7*24*60*60*1000;
            if (tr === '30d') ms = 30*24*60*60*1000;
            params.set('from', new Date(Date.now() - ms).toISOString());
            params.set('to', new Date().toISOString());
          }

          // Reliability floor
          const minReliability = parseInt(document.getElementById('reliability').value, 10) || 0;
          if (minReliability > 0) params.set('minReliability', String(minReliability));

          // Balanced + cluster toggles
          if (document.getElementById('balanced-toggle').checked) params.set('balanced','1');
          if (document.getElementById('cluster-toggle').checked) params.set('cluster','title');

          const res = await fetch(`${this.apiEndpoint}?${params.toString()}`);
          if (!res.ok) throw new Error(`HTTP ${res.status} ${res.statusText}`);

          const data = await res.json();
          if (data.error) throw new Error(data.error);

          this.renderArticles(data.articles || []);

          if (data.quotaExceeded) {
            statusText.textContent = `Showing cached results — GNews daily quota reached`;
            cacheText.textContent = `Response: quota (cached)`;
          } else {
            const cached = res.headers.get('X-Cache') === 'HIT' ? 'cached' : 'fresh';
            statusText.textContent = `Loaded ${(data.articles || []).length} articles • Last updated: ${new Date().toLocaleTimeString()}`;
            cacheText.textContent = `Response: ${cached}`;
          }
        } catch (err) {
          errorEl.textContent = `Failed to load news: ${err.message}`;
          errorEl.style.display = 'block';
        } finally {
          loadingEl.style.display = 'none';
        }
      }

      renderArticles(articles) {
        const el = document.getElementById('news-container');
        if (!articles || !articles.length) {
          el.innerHTML = `<div class="loading" style="padding:36px;">No articles found. Try a different search or broaden the time range.</div>`;
          return;
        }

        el.innerHTML = articles.map(a => this.cardHTML(a)).join('');
        el.querySelectorAll('.article-card').forEach(card => {
          card.addEventListener('click', () => {
            const url = card.getAttribute('data-url');
            if (url) window.open(url, '_blank', 'noopener,noreferrer');
          });
          card.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' || e.key === ' ') {
              e.preventDefault();
              const url = card.getAttribute('data-url');
              if (url) window.open(url, '_blank', 'noopener,noreferrer');
            }
          });
        });
        el.querySelectorAll('.link-btn').forEach(btn => btn.addEventListener('click', (e) => e.stopPropagation()));
      }

      cardHTML(article) {
        const title = this.truncate(article?.title, 120) || 'Untitled';
        const desc = this.truncate(article?.description, 180) || 'No description available.';
        const srcName = article?.source?.name || 'Unknown';
        const dateText = this.humanTime(article?.publishedAt);
        const img = article?.image || '';
        const url = article?.url || '#';

        const rawScore = (typeof article?.reliabilityScore === 'number') ? article.reliabilityScore : 50;
        const score = Math.round(rawScore);
        const relClass = score > 50 ? 'reliability--over' : (score < 50 ? 'reliability--under' : 'reliability--default');
        const reliabilityText = `Reliability ${score}`;

        const detected = (article.bias || '').trim();
        const biasLabelMap = { 'left':'Left','lean-left':'Center Left','center':'Center','lean-right':'Center Right','right':'Right' };
        const biasLabel = biasLabelMap[detected] || 'Unknown';
        const biasClass = detected || 'unknown';

        return `
          <article class="article-card" data-url="${this.escape(url)}" tabindex="0" role="article" aria-label="${this.escape(title)}">
            <div class="article-source">
              <div class="source-logo" aria-hidden="true">${this.initial(srcName)}</div>
              <div class="source-info">
                <div class="source-name">${this.escape(srcName)}</div>
                <div class="source-meta">
                  <span class="reliability-badge ${this.escape(relClass)}">${this.escape(reliabilityText)}</span>
                  <span class="bias-badge ${this.escape(biasClass)}">${this.escape(biasLabel)}</span>
                </div>
              </div>
            </div>

            ${img ? `
              <div class="thumb-frame">
                <img class="thumb" src="${this.escape(img)}" alt=""
                     loading="lazy" decoding="async"
                     onerror="this.closest('.thumb-frame').style.display='none'">
              </div>
            ` : ''}

            <div class="article-content">
              <h3 class="article-title">${this.escape(title)}</h3>
              <div class="article-meta">
                <span>${this.escape(dateText)}</span>
                <span>${this.escape(new URL(url, location.href).hostname || '')}</span>
              </div>
              <p class="article-description">${this.escape(desc)}</p>
              <div class="article-actions">
                <a class="link-btn" href="${this.escape(url)}" target="_blank" rel="noopener noreferrer">Read full article →</a>
              </div>
            </div>
          </article>
        `;
      }

      truncate(t, n) { if (!t) return ''; return t.length > n ? t.slice(0, n - 1) + '…' : t; }
      humanTime(iso) {
        if (!iso) return 'Unknown';
        const d = new Date(iso); if (isNaN(d)) return 'Unknown';
        const diffMs = Date.now() - d.getTime(); const h = Math.floor(diffMs / (1000*60*60));
        if (h < 1) return 'Just now'; if (h < 24) return `${h}h ago`;
        const days = Math.floor(h / 24); if (days === 1) return 'Yesterday';
        return d.toLocaleDateString();
      }
      initial(name) { const c = (name || '').trim()[0]; return (c || '?').toUpperCase(); }
      escape(str) { return String(str || '').replace(/[&<>"']/g, s => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[s])); }
    }

    document.addEventListener('DOMContentLoaded', () => new NewsApp());
  </script>
</body>
</html>
